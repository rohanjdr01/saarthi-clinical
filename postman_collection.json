{
  "info": {
    "name": "Saarthi Clinical API (Complete - Phase 2-3)",
    "description": "Complete API collection for Saarthi Clinical Platform - Medical document processing with AI\n\n## Latest Updates\n- \u2705 Fast upload mode (highlight + vectorize) - documents searchable immediately\n- \u2705 Full processing mode (complete extraction + patient profile sync)\n- \u2705 Auto-extract patient demographics from documents (for placeholder patients)\n- \u2705 Bulk reprocess endpoint for all patient documents\n- \u2705 Diagnosis & Staging endpoints with version history\n- \u2705 Treatment & Cycles management\n- \u2705 Document semantic search (RAG) with File Search/Vectorize\n- \u2705 Field-level source tracking\n- \u2705 Admin editing with version history\n\n## Workflow\n\n### Creating a Patient and Uploading Documents\n1. **Create Patient**: `POST /api/v1/patients` - Create patient record (empty shell or with basic info)\n2. **Upload Documents**: `POST /api/v1/patients/:patientId/documents` with `process_mode`:\n   - `fast` (default): Extract medical highlight + vectorize → makes documents searchable immediately\n   - `full`: Complete extraction + sync to patient profile (diagnosis, medications, treatment, timeline)\n3. **Auto-extraction**: When processing in `full` mode, patient demographics are automatically extracted and updated if the patient has placeholder data (name=\"Processing...\" or missing key fields)\n\n## Authentication\n\n### Option 1: Phone OTP (Backend Endpoints)\n1. Send OTP: `POST /api/v1/auth/phone/send` with `{phoneNumber: \"+1234567890\"}`\n2. Verify OTP: `POST /api/v1/auth/phone/verify` with `{sessionInfo, code}`\n3. Token is automatically saved to `firebaseToken` variable\n\n### Option 2: Generate Token (For Testing)\n1. Generate a Firebase ID token using:\n   ```bash\n   FIREBASE_API_KEY=your-key node scripts/generate-firebase-token.js test@example.com\n   ```\n2. Set the `firebaseToken` variable in this collection with the generated token\n\n### Using Token\nUse the token in the `Authorization: Bearer <token>` header for protected endpoints\n\n## Endpoints\n\n- **Auth**: `/api/v1/auth/*` - Authentication endpoints\n- **Health**: `/api/v1/health` - Health check\n- **Patients**: `/api/v1/patients/*` - Patient management (with extended fields)\n- **Documents**: `/api/v1/patients/:id/documents/*` - Document upload, vectorization, search\n- **Diagnosis & Staging**: `/api/v1/patients/:id/diagnosis` & `/staging` - Clinical data with version history\n- **Treatment**: `/api/v1/patients/:id/treatment/*` - Treatment regimens & cycles\n- **Processing**: `/api/v1/patients/:id/processing/*` - AI document processing\n- **Timeline**: `/api/v1/patients/:id/timeline/*` - Medical timeline\n\n\n## Document Processing Modes\n\n- **Fast Mode** (`process_mode=fast`): Extract medical highlight + vectorize → documents searchable immediately\n- **Full Mode** (`process_mode=full`): Complete extraction + sync to patient profile (diagnosis, medications, treatment, timeline)\n- **Auto-extraction**: Patient demographics are automatically extracted when processing in full mode for patients with placeholder data",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "saarthi-clinical-v3"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "https://process.saarthihq.com/api/v1",
      "type": "string",
      "description": "Production URL"
    },
    {
      "key": "localUrl",
      "value": "http://localhost:8787/api/v1",
      "type": "string",
      "description": "Local development URL"
    },
    {
      "key": "patientId",
      "value": "",
      "type": "string"
    },
    {
      "key": "documentId",
      "value": "",
      "type": "string"
    },
    {
      "key": "firebaseToken",
      "value": "",
      "type": "string",
      "description": "Firebase ID token for authentication (get from token generation script)"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Send Phone OTP",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phoneNumber\": \"+1234567890\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/phone/send",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "phone",
                "send"
              ]
            },
            "description": "Send OTP to phone number. Requires FIREBASE_API_KEY in env.\n\n\u26a0\ufe0f Note: For production, OTP sending should happen on the client side using Firebase SDK with reCAPTCHA.\n\nPhone number must be in E.164 format: +[country code][number]\nExample: +919876543210 for India"
          }
        },
        {
          "name": "Verify Phone OTP",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.idToken) {",
                  "        pm.collectionVariables.set('firebaseToken', response.data.idToken);",
                  "        console.log('Firebase token saved:', response.data.idToken.substring(0, 50) + '...');",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sessionInfo\": \"session-info-from-send-otp-response\",\n  \"code\": \"123456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/phone/verify",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "phone",
                "verify"
              ]
            },
            "description": "Verify OTP code and get Firebase ID token. Requires sessionInfo from /phone/send response.\n\n\u26a0\ufe0f Note: For production, OTP verification should happen on the client side using Firebase SDK.\n\nAfter successful verification, the idToken is automatically saved to firebaseToken variable."
          }
        },
        {
          "name": "Verify Firebase Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('User verified:', response.data.user);",
                  "    console.log('Firebase UID:', response.data.firebase_uid);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"idToken\": \"{{firebaseToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/verify",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "verify"
              ]
            },
            "description": "Verify Firebase ID token and create/update user in D1 database. Get token using: `FIREBASE_API_KEY=your-key node scripts/generate-firebase-token.js test@example.com`"
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{firebaseToken}}",
                "description": "Firebase ID token"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "me"
              ]
            },
            "description": "Get current authenticated user information. Requires Firebase token in Authorization header."
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{firebaseToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "logout"
              ]
            },
            "description": "Logout (client-side token removal). Firebase tokens are stateless, so this is mainly for logging purposes."
          }
        }
      ]
    },
    {
      "name": "Health",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "health"
              ]
            },
            "description": "Check if API is running and all services are available"
          }
        },
        {
          "name": "Database Diagnostic",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health/db",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "health",
                "db"
              ]
            },
            "description": "Diagnostic endpoint to check database connection, binding, and table access. Useful for debugging 'no such table' errors."
          }
        }
      ]
    },
    {
      "name": "Patients",
      "item": [
        {
          "name": "Create Patient",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201 || pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('patientId', response.data.id || response.patient_id);",
                  "    console.log('Patient ID saved:', response.data.id || response.patient_id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Mohammed Kutty\",\n  \"age\": 68,\n  \"gender\": \"male\",\n  \"caregiver\": {\n    \"name\": \"Fatima Kutty\",\n    \"relation\": \"daughter\",\n    \"contact\": \"+91-9999999999\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients"
              ]
            },
            "description": "Create a new patient record"
          }
        },
        {
          "name": "List Patients",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients?limit=20&status=active",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "active"
                }
              ]
            },
            "description": "List all patients with pagination"
          }
        },
        {
          "name": "Get Patient by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}"
              ]
            },
            "description": "Get a specific patient by ID"
          }
        },
        {
          "name": "Update Patient",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"age\": 69,\n  \"caregiver\": {\n    \"contact\": \"+91-8888888888\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}"
              ]
            },
            "description": "Update patient details (partial update with PATCH)"
          }
        },
        {
          "name": "Delete Patient (Archive)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}"
              ]
            },
            "description": "Soft delete (archive) a patient"
          }
        }
      ]
    },
    {
      "name": "Documents",
      "item": [
        {
          "name": "Upload Documents",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 202 || pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.documents && response.data.documents.length > 0) {",
                  "        pm.collectionVariables.set('documentId', response.data.documents[0].id);",
                  "        console.log('Document ID saved:', response.data.documents[0].id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "files",
                  "type": "file",
                  "src": [],
                  "description": "Select PDF/image files to upload"
                },
                {
                  "key": "document_type",
                  "value": "pathology",
                  "type": "text",
                  "description": "Options: pathology, imaging, lab, consultation"
                },
                {
                  "key": "process_mode",
                  "value": "fast",
                  "type": "text",
                  "description": "Processing mode: 'fast' (default - highlight + vectorize) or 'full' (complete extraction + patient profile sync)"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/documents",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "documents"
              ]
            },
            "description": "Upload one or more medical documents"
          }
        },
        {
          "name": "List Documents",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/documents",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "documents"
              ]
            },
            "description": "List all documents for a patient"
          }
        },
        {
          "name": "Get Document",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/documents/{{documentId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "documents",
                "{{documentId}}"
              ]
            },
            "description": "Get document details including extracted data"
          }
        },
        {
          "name": "Download Document",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/documents/{{documentId}}/download",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "documents",
                "{{documentId}}",
                "download"
              ]
            },
            "description": "Download the original document file"
          }
        },
        {
          "name": "Delete Document",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/documents/{{documentId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "documents",
                "{{documentId}}"
              ]
            },
            "description": "Delete a document from storage"
          }
        },
        {
          "name": "Semantic Search",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"What are the tumor markers?\",\n  \"top_k\": 5\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/documents/search",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "documents",
                "search"
              ]
            },
            "description": "Semantic search over document chunks (Vectorize). Returns 501 if VECTORIZE is not configured."
          },
          "description": "Semantic search over document chunks using Vectorize + Workers AI (Phase 3)"
        },
        {
          "name": "Reorder Case-Pack Documents",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"document_orders\": [\n    {\"document_id\": \"doc_123\", \"order\": 1},\n    {\"document_id\": \"doc_456\", \"order\": 2}\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/documents/reorder",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "documents",
                "reorder"
              ]
            },
            "description": "Reorder documents in case-pack (Phase 2: merged functionality)"
          }
        },
        {
          "name": "Bulk Reprocess Documents",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"process_mode\": \"full\",\n  \"provider\": \"gemini\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/documents/reprocess",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "documents",
                "reprocess"
              ]
            },
            "description": "Reprocess all documents for a patient. process_mode: 'fast' (highlight + vectorize) or 'full' (complete extraction). Default: 'full'"
          }
        },
        {
          "name": "Reprocess Document",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"process_mode\": \"full\",\n  \"provider\": \"gemini\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/documents/{{documentId}}/reprocess",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "documents",
                "{{documentId}}",
                "reprocess"
              ]
            },
            "description": "Reprocess a single document. process_mode: 'fast' (highlight + vectorize) or 'full' (complete extraction). Default: 'full'"
          }
        }
      ]
    },
    {
      "name": "Processing",
      "item": [
        {
          "name": "Process Document (Gemini)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"mode\": \"incremental\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/processing/documents/{{documentId}}/process?provider=gemini",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "processing",
                "documents",
                "{{documentId}}",
                "process"
              ],
              "query": [
                {
                  "key": "provider",
                  "value": "gemini",
                  "description": "AI provider: gemini (default) or openai"
                }
              ]
            },
            "description": "Process document with Gemini 3 Pro"
          }
        },
        {
          "name": "Process Document (OpenAI)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"mode\": \"incremental\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/processing/documents/{{documentId}}/process?provider=openai",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "processing",
                "documents",
                "{{documentId}}",
                "process"
              ],
              "query": [
                {
                  "key": "provider",
                  "value": "openai",
                  "description": "AI provider: gemini (default) or openai"
                }
              ]
            },
            "description": "Process document with OpenAI GPT-4o"
          }
        },
        {
          "name": "Get Processing Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/processing/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "processing",
                "status"
              ]
            },
            "description": "Get processing status for all patient documents"
          }
        },
        {
          "name": "Get Processing Log",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/processing/log?limit=10",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "processing",
                "log"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "Get processing history with token usage"
          }
        }
      ]
    },
    {
      "name": "Diagnosis & Staging",
      "item": [
        {
          "name": "Get Diagnosis",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/diagnosis",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "diagnosis"
              ]
            },
            "description": "Get diagnosis information with field-level source tracking"
          }
        },
        {
          "name": "Create/Update Diagnosis",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"primary_cancer_type\": \"Breast Cancer\",\n  \"primary_cancer_subtype\": \"Invasive Ductal Carcinoma\",\n  \"diagnosis_date\": \"2024-01-15\",\n  \"tumor_location\": \"Upper outer quadrant, left breast\",\n  \"tumor_laterality\": \"left\",\n  \"tumor_size_cm\": 2.5,\n  \"tumor_grade\": \"G2\",\n  \"histology\": \"Ductal carcinoma\",\n  \"biomarkers\": {\n    \"ER\": \"positive\",\n    \"PR\": \"positive\",\n    \"HER2\": \"negative\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/diagnosis",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "diagnosis"
              ]
            },
            "description": "Create or update diagnosis (admin only, creates version history)"
          }
        },
        {
          "name": "Get Staging",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/staging",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "staging"
              ]
            },
            "description": "Get TNM staging information"
          }
        },
        {
          "name": "Create/Update Staging",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clinical_t\": \"cT2\",\n  \"clinical_n\": \"cN1\",\n  \"clinical_m\": \"cM0\",\n  \"pathological_t\": \"pT2\",\n  \"pathological_n\": \"pN1\",\n  \"pathological_m\": \"pM0\",\n  \"clinical_stage\": \"IIB\",\n  \"pathological_stage\": \"IIB\",\n  \"staging_system\": \"AJCC 8th\",\n  \"staging_date\": \"2024-01-20\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/staging",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "staging"
              ]
            },
            "description": "Create or update staging (admin only)"
          }
        }
      ]
    },
    {
      "name": "Treatment",
      "item": [
        {
          "name": "Get Treatment",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/treatment",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "treatment"
              ]
            },
            "description": "Get current treatment regimen"
          }
        },
        {
          "name": "Create/Update Treatment",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"regimen_name\": \"AC-T\",\n  \"treatment_intent\": \"adjuvant\",\n  \"treatment_line\": \"first-line\",\n  \"protocol\": \"AC-T Protocol\",\n  \"drugs\": [\"Doxorubicin\", \"Cyclophosphamide\", \"Paclitaxel\"],\n  \"start_date\": \"2024-02-01\",\n  \"total_planned_cycles\": 8,\n  \"treatment_status\": \"active\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/treatment",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "treatment"
              ]
            },
            "description": "Create or update treatment regimen (admin only)"
          }
        },
        {
          "name": "Get All Treatment Cycles",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/treatment/cycles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "treatment",
                "cycles"
              ]
            },
            "description": "Get all treatment cycles"
          }
        },
        {
          "name": "Get Specific Cycle",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/treatment/cycles/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "treatment",
                "cycles",
                "1"
              ]
            },
            "description": "Get a specific treatment cycle by number"
          }
        },
        {
          "name": "Add Treatment Cycle",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cycle_number\": 1,\n  \"planned_date\": \"2024-02-01\",\n  \"actual_date\": \"2024-02-01\",\n  \"drugs_administered\": [\n    {\"drug\": \"Doxorubicin\", \"dose\": 60, \"unit\": \"mg/m2\", \"route\": \"IV\"},\n    {\"drug\": \"Cyclophosphamide\", \"dose\": 600, \"unit\": \"mg/m2\", \"route\": \"IV\"}\n  ],\n  \"cycle_status\": \"completed\",\n  \"dose_percentage\": 100.0\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/treatment/cycles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "treatment",
                "cycles"
              ]
            },
            "description": "Add a new treatment cycle"
          }
        },
        {
          "name": "Update Treatment Cycle",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"adverse_events\": [\n    {\"event\": \"Nausea\", \"grade\": 2},\n    {\"event\": \"Fatigue\", \"grade\": 1}\n  ],\n  \"ctcae_grade\": 2\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/treatment/cycles/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "treatment",
                "cycles",
                "1"
              ]
            },
            "description": "Update a treatment cycle"
          }
        }
      ]
    },
    {
      "name": "Document Search",
      "item": [
        {
          "name": "Search Documents (RAG)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"breast cancer diagnosis\",\n  \"top_k\": 5\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/documents/search",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "documents",
                "search"
              ]
            },
            "description": "Semantic search across patient documents using RAG (File Search or Vectorize)"
          }
        },
        {
          "name": "Reorder Documents",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"document_orders\": [\n    {\"document_id\": \"doc_123\", \"order\": 1},\n    {\"document_id\": \"doc_456\", \"order\": 2}\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/documents/reorder",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "documents",
                "reorder"
              ]
            },
            "description": "Reorder documents (updates case_pack_order)"
          }
        }
      ]
    },
    {
      "name": "Views",
      "item": [
        {
          "name": "Get Patient Summary",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/summary",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "summary"
              ]
            },
            "description": "Get aggregated patient summary from all processed documents"
          }
        },
        {
          "name": "Get Diagnosis & Staging",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/detailed/diagnosis_staging",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "detailed",
                "diagnosis_staging"
              ]
            },
            "description": "Get detailed diagnosis and staging information"
          }
        },
        {
          "name": "Get Imaging Findings",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/detailed/imaging_findings",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "detailed",
                "imaging_findings"
              ]
            },
            "description": "Get detailed imaging findings"
          }
        },
        {
          "name": "Get Lab Results",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/detailed/lab_results",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "detailed",
                "lab_results"
              ]
            },
            "description": "Get detailed lab results"
          }
        }
      ]
    },
    {
      "name": "Timeline",
      "item": [
        {
          "name": "Get Timeline",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/timeline",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "timeline"
              ]
            },
            "description": "Get chronological timeline of all medical events"
          }
        },
        {
          "name": "Get Timeline Tracks",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/patients/{{patientId}}/timeline/tracks",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "timeline",
                "tracks"
              ]
            },
            "description": "Get timeline grouped by event type (tracks)"
          }
        }
      ]
    },
    {
      "name": "Medications",
      "item": [
        {
          "name": "List Medications",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/medications",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "medications"
              ]
            },
            "description": ""
          }
        },
        {
          "name": "Create Medication",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/medications",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "medications"
              ]
            },
            "description": "Admin only",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"medication_name\": \"Cisplatin\",\n  \"dose\": 50,\n  \"dose_unit\": \"mg\",\n  \"frequency\": \"q3w\",\n  \"route\": \"IV\",\n  \"medication_status\": \"active\"\n}"
            }
          }
        },
        {
          "name": "Update Medication",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/medications/{{medicationId}}",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "medications",
                "{{medicationId}}"
              ]
            },
            "description": "Admin only",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"medication_status\": \"discontinued\",\n  \"discontinuation_reason\": \"Completed regimen\"\n}"
            }
          }
        },
        {
          "name": "Delete Medication",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/medications/{{medicationId}}",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "medications",
                "{{medicationId}}"
              ]
            },
            "description": ""
          }
        }
      ]
    },
    {
      "name": "Alerts",
      "item": [
        {
          "name": "List Alerts",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/alerts",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "alerts"
              ]
            },
            "description": ""
          }
        },
        {
          "name": "Create Alert",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/alerts",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "alerts"
              ]
            },
            "description": "Admin only",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"alert_type\": \"clinical\",\n  \"severity\": \"high\",\n  \"title\": \"Neutropenia risk\",\n  \"description\": \"ANC trending down\"\n}"
            }
          }
        },
        {
          "name": "Update Alert",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/alerts/{{alertId}}",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "alerts",
                "{{alertId}}"
              ]
            },
            "description": "Admin only",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"alert_status\": \"acknowledged\",\n  \"acknowledged_by\": \"usr_admin\"\n}"
            }
          }
        },
        {
          "name": "Delete Alert",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/alerts/{{alertId}}",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "alerts",
                "{{alertId}}"
              ]
            },
            "description": ""
          }
        }
      ]
    },
    {
      "name": "Labs",
      "item": [
        {
          "name": "List Lab Results",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/labs",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "labs"
              ]
            },
            "description": ""
          }
        },
        {
          "name": "Create Lab Result",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/labs",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "labs"
              ]
            },
            "description": "Admin only",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"test_name\": \"Hemoglobin\",\n  \"result_value\": 10.5,\n  \"result_unit\": \"g/dL\",\n  \"test_date\": \"2025-01-01\"\n}"
            }
          }
        },
        {
          "name": "Update Lab Result",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/labs/{{labId}}",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "labs",
                "{{labId}}"
              ]
            },
            "description": "Admin only",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"result_value\": 11.2,\n  \"is_abnormal\": false\n}"
            }
          }
        },
        {
          "name": "Delete Lab Result",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/labs/{{labId}}",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "labs",
                "{{labId}}"
              ]
            },
            "description": ""
          }
        }
      ]
    },
    {
      "name": "History",
      "item": [
        {
          "name": "List Medical History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/history/medical",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "history",
                "medical"
              ]
            },
            "description": ""
          }
        },
        {
          "name": "Add Medical History",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/history/medical",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "history",
                "medical"
              ]
            },
            "description": "Admin only",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"condition\": \"Hypertension\",\n  \"diagnosis_date\": \"2010-01-01\"\n}"
            }
          }
        },
        {
          "name": "List Surgical History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/history/surgical",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "history",
                "surgical"
              ]
            },
            "description": ""
          }
        },
        {
          "name": "Add Surgical History",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/history/surgical",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "history",
                "surgical"
              ]
            },
            "description": "Admin only",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"procedure_name\": \"Appendectomy\",\n  \"surgery_date\": \"2015-05-05\"\n}"
            }
          }
        },
        {
          "name": "List Family History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/history/family",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "history",
                "family"
              ]
            },
            "description": ""
          }
        },
        {
          "name": "Add Family History",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/history/family",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "history",
                "family"
              ]
            },
            "description": "Admin only",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"relationship\": \"mother\",\n  \"condition\": \"Breast cancer\"\n}"
            }
          }
        },
        {
          "name": "List Social History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/history/social",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "history",
                "social"
              ]
            },
            "description": ""
          }
        },
        {
          "name": "Add Social History",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/history/social",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "history",
                "social"
              ]
            },
            "description": "Admin only",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tobacco_use\": \"never\",\n  \"alcohol_use\": \"occasional\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "Clinical Decisions",
      "item": [
        {
          "name": "List Decisions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/decisions",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "decisions"
              ]
            },
            "description": ""
          }
        },
        {
          "name": "Create Decision",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/decisions",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "decisions"
              ]
            },
            "description": "Admin only",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"decision_type\": \"treatment_plan\",\n  \"clinical_question\": \"Next line therapy?\",\n  \"decision_made\": \"Start AC-T\"\n}"
            }
          }
        },
        {
          "name": "Update Decision",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/decisions/{{decisionId}}",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "decisions",
                "{{decisionId}}"
              ]
            },
            "description": "Admin only",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"implementation_status\": \"in_progress\"\n}"
            }
          }
        },
        {
          "name": "Delete Decision",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{localUrl}}/patients/{{patientId}}/decisions/{{decisionId}}",
              "host": [
                "{{localUrl}}"
              ],
              "path": [
                "patients",
                "{{patientId}}",
                "decisions",
                "{{decisionId}}"
              ]
            },
            "description": ""
          }
        }
      ]
    }
  ]
}